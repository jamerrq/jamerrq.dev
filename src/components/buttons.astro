---
const BUTTONS_STYLES = [
  'col-span-2',
  'row-span-1',
  'gap-2',
  'rounded-sm',
  'shadow-[0_0_0.5rem_rgba(0_0_0_0.5)]',
  'flex',
  'items-center',
  'justify-around',
  'responsive-text',
  'border-2',
  'border-slate-950',
  'dark:border-slate-300',
  // 'bg-[#1b383c]',
  'text-slate-950',
  'font-rubik-doodle',
  'w-full',
  'h-full',
  'transition-all',
  'duration-200',
  'dark:bg-slate-900',
  'dark:text-slate-100',
  'bg-slate-300',
  '[&>*]:font-fira'
  // '[&>*]:hover:text-slate-300',
].join(' ')

const BUTTON_STYLES = [
  'dark:hover:text-slate-300',
  'hover:text-slate-100'
  // 'hover:scale-110',
].join(' ')
---

<article class={BUTTONS_STYLES} transition:persist>
  <!-- LANGUAGE SWITCH -->
  <button
    class={BUTTON_STYLES}
    title='switch language en/es'
    id='language-toggle'
  >
    ÔÜ´
  </button>
  <!-- HOME OR RANDOM PLACE -->
  <button class={BUTTON_STYLES + ' hidden'} title='go home' id='home-button'>
    ÔÄï
  </button>
  <button
    class={BUTTON_STYLES + ' hidden'}
    title='go to a random page'
    id='random-place-button'
  >
    Û∞ùÆ
  </button>
  <!-- THEME SWITCH -->
  <button
    id='theme-toggle'
    type='button'
    title='switch dark/light theme'
    class='dark:hover:text-slate-300 hover:text-slate-100'
  >
    <p id='theme-toggle-dark-icon' class='hidden'>ÔÜÜ</p>
    <p id='theme-toggle-light-icon' class='hidden'>Ôî¢</p>
  </button>
  <!-- CLOSE -->
  <a
    href='https://github.com/jamerrq/jamerrq.dev'
    target='_blank'
    rel='noopener noreferrer'
    class='dark:hover:text-slate-300 hover:text-slate-100'
    title='Source Code. Leave a star üåü if you like!'
  >
    Óúâ
  </a>
</article>

<script defer>
  const darkIcon = document.getElementById('theme-toggle-dark-icon')
  const lightIcon = document.getElementById('theme-toggle-light-icon')

  // Cambia los iconos dentro del bot√≥n en funci√≥n de la configuraci√≥n anterior
  if (
    localStorage.getItem('color-theme') === 'dark' ||
    (!('color-theme' in localStorage) &&
      window.matchMedia('(prefers-color-scheme: dark)').matches)
  ) {
    lightIcon.classList.remove('hidden')
    // en caso que se haya configurado previamente
    document.documentElement.classList.add('dark')
  } else {
    darkIcon.classList.remove('hidden')
  }

  const themeToggleBtn = document.getElementById('theme-toggle')

  themeToggleBtn.addEventListener('click', function () {
    darkIcon.classList.toggle('hidden')
    lightIcon.classList.toggle('hidden')

    // se comprueba si se ha configurado previamente
    if (localStorage.getItem('color-theme')) {
      if (localStorage.getItem('color-theme') === 'light') {
        document.documentElement.classList.add('dark')
        localStorage.setItem('color-theme', 'dark')
      } else {
        document.documentElement.classList.remove('dark')
        localStorage.setItem('color-theme', 'light')
      }

      // se comprueba si el sistema operativo tiene configurado el tema oscuro
    } else {
      if (document.documentElement.classList.contains('dark')) {
        document.documentElement.classList.remove('dark')
        localStorage.setItem('color-theme', 'light')
      } else {
        document.documentElement.classList.add('dark')
        localStorage.setItem('color-theme', 'dark')
      }
    }
  })

  // Home & Random Place buttons
  const homeButton = document.getElementById('home-button')
  const randomPlaceButton = document.getElementById('random-place-button')

  // Mediante la ruta se comprueba si se est√° en la p√°gina principal
  if (window.location.pathname === '/') {
    homeButton.classList.add('hidden')
    randomPlaceButton.classList.remove('hidden')
  } else {
    homeButton.classList.remove('hidden')
    randomPlaceButton.classList.add('hidden')
  }

  // Agrega el evento de click a los botones
  homeButton.addEventListener('click', function () {
    window.location.href = '/'
  })
  randomPlaceButton.addEventListener('click', function () {
    const places = ['/blog', '/tech-stack', '/featured']
    window.location.href = places[Math.floor(Math.random() * places.length)]
  })
</script>
